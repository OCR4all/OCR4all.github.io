import{_ as n,c as o,a as t,b as a,t as s,d as r,o as l}from"./app.eaf89653.js";const d="/images/user-guide/workflow/process_flow.png",c="/images/user-guide/workflow/selection_of_an_appropiate_ocr_model.png",g="/images/user-guide/workflow/individual_lines_with_their_corresponding_ocr_results.png",u="/images/user-guide/workflow/pre-processing_settings.png",h="/images/user-guide/workflow/noise_removal_settings.png",p="/images/user-guide/workflow/LAREX_settings.png",m="/images/user-guide/workflow/LAREX_interface_with_automatic_segmentation_results.png",f="/images/user-guide/workflow/toolbar.png",w="/images/user-guide/workflow/sidebar_settings.png",y="/images/user-guide/workflow/range_options_regions.png",b="/images/user-guide/workflow/layout_regions_display_and_template.png",v="/images/user-guide/workflow/defining_new_layout_regions.png",k="/images/user-guide/workflow/parameters_settings.png",_="/images/user-guide/workflow/settings.png",x="/images/user-guide/workflow/toolbar_reading_order.png",R="/images/user-guide/workflow/auto_generated_results.png",T="/images/user-guide/workflow/region_of_interest.png",e="/images/user-guide/workflow/correcting_a_faulty_typification.png",O="/images/user-guide/workflow/drawing_a_line.png",C="/images/user-guide/workflow/correcting_typification.png",A="/images/user-guide/workflow/determining_reading_order.png",I="/images/user-guide/workflow/saving_segmentation_result.png",S="/images/user-guide/workflow/showing_contours.png",L="/images/user-guide/workflow/selecting_contours.png",E="/images/user-guide/workflow/aggregating_selected_items.png",X="/images/user-guide/workflow/typifying_new_layout_element.png",P="/images/user-guide/workflow/layout_element_contours.png",q="/images/user-guide/workflow/line_segmentation_settings.png",z="/images/user-guide/workflow/selection_of_model_package.png",j="/images/user-guide/workflow/ground_truth_production_text_view.png",G="/images/user-guide/workflow/ground_truth_production_page_view.png",D="/images/user-guide/workflow/evaluation.png",W="/images/user-guide/workflow/settings_for_training.png",U="/images/user-guide/workflow/adjusting_line_based_reading_order.png",M="/images/user-guide/workflow/result_generation.png",ee=JSON.parse('{"title":"Workflow","description":"","frontmatter":{"title":"Workflow"},"headers":[{"level":2,"title":"Process Flow","slug":"process-flow","link":"#process-flow","children":[]},{"level":2,"title":"Preprocessing","slug":"preprocessing","link":"#preprocessing","children":[]},{"level":2,"title":"Noise Removal","slug":"noise-removal","link":"#noise-removal","children":[]},{"level":2,"title":"Segmentation – LAREX","slug":"segmentation-–-larex","link":"#segmentation-–-larex","children":[]},{"level":2,"title":"Initial Settings","slug":"initial-settings","link":"#initial-settings","children":[]},{"level":2,"title":"Overview and toolbar","slug":"overview-and-toolbar","link":"#overview-and-toolbar","children":[]},{"level":2,"title":"Specific settings: ‘regions’, ‘parameters’, ‘reading order’, ‘settings’","slug":"specific-settings-regions-parameters-reading-order-settings","link":"#specific-settings-regions-parameters-reading-order-settings","children":[]},{"level":2,"title":"Exemplary page segmentation","slug":"exemplary-page-segmentation","link":"#exemplary-page-segmentation","children":[]},{"level":2,"title":"Additional processing options","slug":"additional-processing-options","link":"#additional-processing-options","children":[]},{"level":2,"title":"Final steps with LAREX","slug":"final-steps-with-larex","link":"#final-steps-with-larex","children":[]},{"level":2,"title":"Line Segmentation","slug":"line-segmentation","link":"#line-segmentation","children":[]},{"level":2,"title":"Recognition","slug":"recognition","link":"#recognition","children":[]},{"level":2,"title":"Ground Truth Production","slug":"ground-truth-production","link":"#ground-truth-production","children":[]},{"level":2,"title":"Evaluation","slug":"evaluation","link":"#evaluation","children":[]},{"level":2,"title":"Training","slug":"training","link":"#training","children":[]},{"level":2,"title":"Post Correction","slug":"post-correction","link":"#post-correction","children":[]},{"level":2,"title":"Result Generation","slug":"result-generation","link":"#result-generation","children":[]}],"relativePath":"guide/user-guide/workflow.md","lastUpdated":1675107052000}'),N={name:"guide/user-guide/workflow.md"},F={id:"frontmatter-title",tabindex:"-1"},Y=t("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),B=r('<h2 id="process-flow" tabindex="-1">Process Flow <a class="header-anchor" href="#process-flow" aria-hidden="true">#</a></h2><p>This variant (main menu ☰ → Process Flow) allows for a virtually automated workflow. It merely requires the initial pick of the intended scans (sidebar on the right) and subsequent selection of the individual processing steps the user wishes to apply to the chosen data (fig. 5).</p><p><img src="'+d+'" alt="&#39;Process flow&#39; Subcomponents."> fig. 6. &#39;Process flow&#39; Subcomponents.</p><p>In order to complete the process, choose an appropriate OCR model (or model package, composed of five individual models working simultaneously and in concert – see chapter 4.7). Simply go to ‘setting’ → ‘recognition’ → ‘general’ (as illustrated in fig. 6) and choose from the list of available OCR models (‘line recognition models’ – ‘available’).</p><p><img src="'+c+'" alt="Selection of an appropriate OCR model."> fig. 7. Selection of an appropriate OCR model.</p><p>Although it is generally possible to choose more than one recognition model, this is only recommended if the scans in question contain more than one printing type.</p><p>Finally, start the ‘process flow’ by clicking on ‘execute’. The current stage of this automated processing is translated into the progress bars and can be reviewed at any time. After the workflow’s completion, the results can be verified under the menu item ‘ground truth production’ (☰) .</p><p><img src="'+g+'" alt="Individual lines with their corresponding OCR results."> fig. 8. Individual lines with their corresponding OCR results.</p><p>If the OCR’s line-based results immediately meet the desired or required accuracy of recognition, final results can be generated (TXT and / or PAGE XML) under menu item ‘result generation’. Were those results not to meet the user’s requirements, they can be once more corrected before the final generation (see chapter 4.8).</p><p>Aside this ‘process flow’, OCR4all additionally provides the option of a sequential workflow which enables the user to independently execute the software’s individual submodules (see fig. 1) and their components, thus ensuring the proper correctness and quality of the generated data. Considering that these submodules are built on one another, the sequential workflow seems to be the most adequate choice when working with early modern prints and their intricate, complex layout.</p><p>We recommend first-time users execute the sequential workflow at least once (as described below) in order to understand the submodules’ operating principles.</p><h2 id="preprocessing" tabindex="-1">Preprocessing <a class="header-anchor" href="#preprocessing" aria-hidden="true">#</a></h2><p><strong>Input:</strong> original image (in colour, greyscale or binarized)<br><strong>Output:</strong> straightened binarized or greyscale image</p><ul><li>This processing step is meant to produce binarized and normalized greyscale images, a basic requirement for a successful segmentation and recognition.</li><li>Proceed by selecting the relevant scans (sidebar on the right) – the settings must remain unchanged (‘settings (general)’ and ‘settings (advanced)’), meaning that the images’ angle as well as the automatically generated number of CPUs used by this particular submodule don’t vary either (the latter pertains to all of OCR4all’s subsequent submodules).</li></ul><p><img src="'+u+'" alt="Pre-processing settings."> fig. 9. Pre-processing settings.</p><ul><li>Click on ‘execute’ to start binarization. The progression of this work stage can be tracked on the console, more accurately the ‘console output’. Warnings might be issued during the binarization process (in ‘console error’) which have no incidence on the binarization results.</li><li>In order to check the binarization’s success, simply go to ‘project overview’ and click on any page identifier then on the display option ‘binary’. In addition, all processed pages should be marked with a green check mark in the project overview.</li></ul><h2 id="noise-removal" tabindex="-1">Noise Removal <a class="header-anchor" href="#noise-removal" aria-hidden="true">#</a></h2><p><strong>Input:</strong> polluted binarized images<br><strong>Output:</strong> binarized images without (or with very little) pollution</p><p>-The noise removal option helps to get rid of small impurities such as stains or blotches on the scans</p><ul><li>Proceed by clicking on ‘noise removal’ (main menu) and selecting the scans you wish to process on the right side of your display. You should initially conserve the default settings and, after clicking on ‘execute’, check the initial quality of the results: simply click on the designation of the scan you wish to verify (right sidebar); the ‘image preview’ option will provide you with a side by side comparison of the image before and after the noise removal. Please note that red elements will be deleted by this step.</li></ul><p><img src="'+h+'" alt="Noise removal settings."> fig. 10. Noise removal settings.</p><ul><li>If too many interfering elements remain on the image, slightly adjust the ‘maximal size for removing contours’ factor upwards and repeat the step by clicking once again on ‘execute’ and subsequently reviewing the results.</li><li>If too many elements were removed from the image, readjust the ‘maximal size…’ factor downwards.</li><li>Try again until the results are satisfactory.</li></ul><h2 id="segmentation-–-larex" tabindex="-1">Segmentation – LAREX <a class="header-anchor" href="#segmentation-–-larex" aria-hidden="true">#</a></h2><p><strong>Input:</strong> pre-processed images<br><strong>Output:</strong> structural information about the layout regions (type and position) as well as reading order</p><p>LAREX is a segmentation tool which structures and classifies a printed page’s layout with regard to its later processing. LAREX is based on the basic assumption that the pages of early modern prints are composed of a recurring array of layout elements whose composition, although always book-specific, is largely consistent. Thus, the user is provided with different tools and resources whose aim it is to adequately structure and segment a printed page in order to catalogue all layout-related information necessary to the workflow’s subsequent steps. Besides the basic distinction between text and non-text (e.g. text vs. image/woodcut) and its further specifications (e.g. text headline, main text, page number etc.), this also includes information about the page’s reading order, i.e. the reading and usage order of the available layout elements.</p><h2 id="initial-settings" tabindex="-1">Initial Settings <a class="header-anchor" href="#initial-settings" aria-hidden="true">#</a></h2><ul><li>Menu: click on ‘segmentation’, then on ‘LAREX’</li><li>Go to ‘Segmentation image type’: select ‘binary’ if you will be working with binarized images, or ‘despeckled’ if the images went through the noise removal process</li><li>Click on ‘open LAREX’ → LAREX will open in a new tab</li></ul><p><img src="'+p+'" alt="LAREX settings."> fig. 11: LAREX settings.</p><p>Once LAREX has opened, the first one of the pre-selected pages will be visible at the centre of your display, including a few initial segmentation results, which are generated by the automatic segmentation each page undergoes when initially opened with LAREX. Please note that these results are not saved. From there, the user will have to adjust the settings, tailoring the initial segmentation results to their particular work’s layout and undertaking a manual post-correction to ensure segmentation accuracy.</p><p><img src="'+m+'" alt="LAREX interface with automatic segmentation results."> fig. 12. LAREX interface with automatic segmentation results.</p><h2 id="overview-and-toolbar" tabindex="-1">Overview and toolbar <a class="header-anchor" href="#overview-and-toolbar" aria-hidden="true">#</a></h2><p>The left sidebar displays all previously selected scans. Colour-coded markings visible in the bottom right corner indicate the current stage of each scan’s processing:</p><ul><li>Orange exclamation mark: “there is no segmentation for this page” – no current segmentation results for this page</li><li>Orange warning sign: “current segmentation may be unsaved”</li><li>Green floppy disk: “segmentation was saved for this session” – segmentation results have been saved as an XML file</li><li>Green padlock: “there is a segmentation for this page on the server” – individual previously saved segmentation results (c.) have been marked as correct after completion of the entire document’s segmentation (see below).</li></ul><p>fig. 13. Different display modes.</p><ul><li>With the buttons &#39;0&#39; and &#39;1&#39; it is possible to switch between the binarized (black and white) and the normalized (grayscale) display mode. This selection is noted for all remaining pages of the project. It is possible to change the display mode again at any time.</li><li>In the topbar, you will find different tools and tool categories pertaining to navigation and image processing:</li></ul><p><img src="'+f+'" alt="Different menu items in the toolbar."> fig. 14. Different menu items in the toolbar.</p><ul><li><strong>Open a different book:</strong> No settings adjustments necessary for all LAREX versions as integrated in OCR4all.</li><li><strong>Image Zoom:</strong> Enables general settings for image or scan display, such as zoom options. However, these can also be adjusted with your mouse and/or touchpad: shift the displayed page by left click-and-holding and moving your mouse; zoom using mouse wheel or touchpad.</li><li><strong>Undo</strong> und <strong>Redo:</strong> Undo or redo last user action. Even common key combinations are possible (i.g. CTRL + Z for undo last action).</li><li><strong>Delete selected items:</strong> Delete currently selected region.</li><li><strong>RoI, Region, Segment, Order:</strong> In addition to the right sidebar, these are the different options for processing and segmenting scans. While the options featured in the toolbar generally pertain to the current scan’s processing (see below), the right sidebar features project-wide options across all scans.</li></ul><p><img src="'+w+'" alt="Right sidebar’s settings."> fig. 15. Right sidebar’s settings.</p><p>However, the latter can be amended, changed or adjusted at any time. In this case, we recommend saving all previously carried-out settings, whether they be related to recognition parameters (‘parameters’) or to document-specific layout elements (‘regions’) previously determined by the user, in ‘settings’. This will ensure these particular settings are applied the next time you work with this tool, enabling you to work with document-specific settings from then on.</p><h2 id="specific-settings-regions-parameters-reading-order-settings" tabindex="-1">Specific settings: ‘regions’, ‘parameters’, ‘reading order’, ‘settings’ <a class="header-anchor" href="#specific-settings-regions-parameters-reading-order-settings" aria-hidden="true">#</a></h2><ul><li>&#39;<strong>Regions</strong>&#39;: In accordance with the LAREX concept, each scan (that is, each book page) is composed of several, distinct layout elements, e.g. main text (‘paragraph’), title, marginalia, page number, etc. Thus, LAREX requires that corresponding ‘regions’ be assigned to each of these layout elements. This assigning task must be consistently performed throughout the entire work, in preparation for further steps as well as for the actual recognition of the displayed content! Besides a small number of pre-set and predefined layout regions – for instance ‘image’ (graphics such as woodcuts and ornate initials), ‘paragraph’ (main text) or ‘page_number’ – the user can define and add further book-specific layout regions under ‘create’. Not only can the user change a region’s colour, but they can also define the minimum size of a textual/graphical page element which they wish to recognize as such (under ‘minSize’). The layout region thus defined can be added to the book-specific list by clicking on ‘save’.</li></ul><p><img src="'+y+'" alt="Range of options under ‘Regions’."> fig. 16. Range of options under ‘Regions’.</p><ul><li>Moreover, the ‘regions’ feature enables the user to assign particular layout regions to a fixed and predefined location on the scan which will then be applied to the following scans. Provided a page’s layout is repeated throughout the entire book, the user can generate something of a layout template in order to improve segmentation and reduce the number of necessary corrections later on. In order to adjust the position of these layout regions to a book’s specific layout, simply display the layout region’s current position and adjust it by selecting the scanned page’s regions.</li></ul><p><img src="'+b+'" alt="Layout regions display and template."> fig. 17. Layout regions display and template.</p><p>Once a new region has been defined, its position on the page can be established by clicking on ‘Region’ → ‘Create a region rectangle (Shortcut: 1)’, an option located in the toolbar. This can be undone or changed at any time. Please note that the category ‘images’ can’t be assigned to a layout region on the page.</p><p><img src="'+v+'" alt="Defining new layout regions."> fig. 18. Defining new layout regions.</p><p>All things considered, it isn’t always advisable to assign fixed positions to all layout regions for an entire book; if the position of certain regions such as chapter titles, mottos, page number or signature marks on the different pages is inconsistent, assigning predefined positions will lead to recognition errors. In this case, manually verifying and correcting these layout elements afterwards is the more practical approach. If the user needs to delete a layout region’s position, they can simply select the region in question and press the ‘delete’ key.</p><ul><li>&#39;<strong>Parameters</strong>&#39;: Allows to define overall parameters of image and text recognition. Taking the time to pre-set certain book-specific parameters is recommended when working with an inconsistent layout, particularly that of early modern prints. These often feature great divergences of word and line spacing. To avoid a narrowly spaced group of lines from being recognised as one cohesive textual element, the ‘text dilation’ feature enables you to control and define the text’s degree of dilation in the x- and y-direction. This will enable the software to recognise originally too close word/line spacing or to recognise widely spaced passages as one cohesive element. We recommend trying and testing in order to find the settings best suited to a particular book.</li></ul><p><img src="'+k+'" alt="Parameters settings."> fig. 19. Parameters settings.</p><ul><li>&#39;<strong>Settings</strong>&#39;: Under ‘Settings’ you can save the previously selected displaying and segmentation options as well as loading them anew after an interruption in segmentation (buttons ‘save settings’ and ‘load settings’). Saving will generate an XML file which you will need to select when loading the settings (click on ‘load settings’, a new window will open; select file in question and open it). An additional feature will enable you to re-load previous pages’ segmentation results if you wish to view them again: simply go to ‘advanced settings’ and click on ‘load now’. This will load any previously saved XML file containing that page’s segmentation results.</li></ul><p><img src="'+_+'" alt="Settings."> fig. 20: Settings.</p><ul><li>&#39;<strong>Reading Order</strong>&#39;: In order for the correct order of a page’s textual elements to be taken into account in all steps following segmentation, it is necessary to define these elements’ ‘reading order’ beforehand. This can be done automatically provided a book’s layout be relatively clear and simple. However, should you be working with a more complex layout structure, we recommend you proceed manually. Simply select ‘auto generate a reading order’ or ‘set a reading order’ under toolbar item ‘Order’.</li></ul><p><img src="'+x+'" alt="Reading order selection in toolbar"> fig. 21. Reading order selection in toolbar</p><p>By clicking on the auto reading order button, a list of all the page’s textual elements will appear in the right sidebar (under ‘reading order’), sorted from top to bottom. On the other hand, if you wish to manually establish reading order, you will need to click on each of the page’s textual elements, in the correct order (see below), after which this reading order will appear in the aforementioned list. All elements of the reading order can be rearranged with a drag-and-drop or deleted by clicking on the corresponding recycle bin icon. As with everything in LAREX, the reading order can always be changed before saving the final segmentation results.</p><h2 id="exemplary-page-segmentation" tabindex="-1">Exemplary page segmentation <a class="header-anchor" href="#exemplary-page-segmentation" aria-hidden="true">#</a></h2><p>With each page loading, LAREX automatically generates segmentation results – these only need to be subsequently corrected. The following, exemplary segmentation process uses page 4 of reference book Cirurgia, which you can download here when downloading the OCR4all folder structure.</p><p><strong>Error analysis:</strong> Which layout elements were correctly recognised, which incorrectly, which weren’t at all? Are there any user marks in the margins, bordures, spots or elements of text which will influence segmentation, but you wish to avoid being recognised?</p><p><img src="'+R+'" alt="Auto generated results, Cirurgia page 4."> fig. 22. Auto generated results, Cirurgia page 4.</p><p><strong>&#39;Region of interest&#39; (RoI):</strong> Defining a RoI will help exclude certain sections of your page, situated outside the area later subjected to recognition but which can negatively impact segmentation (such as user marks, impurities, library stamps, etc.). To do so, go to toolbar and click on ‘Set the region of interest’ (under ‘RoI’), then use left click-and-hold to draw a rectangle around the page section you wish to segment.</p><p><img src="'+T+'" alt="Defining a &#39;region of interest&#39;."> fig. 23. Defining a &#39;region of interest&#39;.</p><p>Once RoI has been defined, click on &#39;SEGMENT&#39; button (right sidebar) – all element situated outside of RoI are now excluded from any further steps. Once RoI has been defined, it will be automatically transposed to all the book&#39;s scans. However, due to a wide array of factors, the page sections relevant to segmentation can shift from scan to scan. Therefore, as processing progresses, the user will likely need to adjust RoI from time to time. To do so, simply click on any RoI section and shift it using the mouse. Independently of RoI, the &#39;Create an ignore rectangle&#39; option creates an &#39;ignore region&#39; which allows for certain, small sections of a scan to be ignored and thus excluded from segmentation.</p><p><strong>Correcting layout recognition flaws:</strong> Incorrectly recognized layout elements can be assigned a new typification manually: a right-hand click on said element will open a pop-up menu from which you can choose the correct designation.</p><p><img src="'+e+'" alt="Correcting a faulty typification."> fig. 24. Correcting a faulty typification.</p><p>Should you need to separate a title from another textual element with which it is fused, there three ways to proceed: To begin, you can draw a rectangle around the section you wish to classify: proceed to toolbar, click on ‘Segment’ and select ‘Create a fixed segment rectangle’ (shortcut: 3); using mouse, draw a rectangle around the relevant section – a pop-up menu will appear from</p><p>which it’s correct designation/type can be chosen. Next, you can instead choose to use a polygon shape. This option is particularly suited to the more complex or chaotic layouts and/ or those comprising angled edges, rounded pictures and woodcuts, or ornate initials inside the text block. Proceed to toolbar, click on ‘Segment’, this time selecting ‘Create a fixed segment polygon’ option (shortcut: 4). Using the mouse, generate a dotted line to go around end encompass the entire relevant section – once the line’s end has been joined to its starting point, creating a polygon, the aforementioned pop-up menu will appear to allow for designation. Finally, you can also separate a text block – Initially recognized as one paragraph – into a title and main text using a cutting line: simply go to toolbar and ‘Segment’, and select ‘Create a cut line’ option (shortcut: 5).</p><p><img src="'+e+'" alt="Correcting a faulty typification."> fig. 25. Toolbar: selecting cut line option.</p><p>Using left mouse key, create a line through the element you wish to separate, clicking along its path to adjust it as needed; end line with a double click.</p><p><img src="'+O+'" alt="Drawing a line between two layout elements to be separated."> fig. 26. Drawing a line between two layout elements to be separated.</p><p>Click on &#39;Segment&#39; in order to prompt separation. Afterwards, title element can be correctly renamed, using right-hand click and pop-up menu (as shown below).</p><p><img src="'+C+'" alt="Correcting typification of separated sections."> fig. 27. Correcting typification of separated sections.</p><p>If at any time you with to delete layout components, inaccurate cutting lines or polygons, etc. simply click on the relevant element and use ‘Delete’ key or ‘Delete selected items’ option in the toolbar.</p><p><strong>Determining &#39;Reading Order&#39; (see below):</strong></p><p><img src="'+A+'" alt="Determining reading order."> fig. 28. Determining reading order.</p><p><strong>Saving current scan’s segmentation results:</strong> Save your segmentation results by clicking on ‘Save results’ or with Ctrl + S. This will automatically generate an XML file containing those results inside the OCR4all folder structure.</p><p><img src="'+I+'" alt="Saving segmentation results."> fig. 29. Saving segmentation results.</p><p>Afterwards, you can proceed to the next scan (left sidebar). If you wish to redo or change a scan’s segmentation, you can do as much at any time: simply save the new results – the previous XML file will be automatically deleted and replaced with a new version.</p><h2 id="additional-processing-options" tabindex="-1">Additional processing options <a class="header-anchor" href="#additional-processing-options" aria-hidden="true">#</a></h2><p>OCR4all also provides the following scan processing options:</p><ul><li>While deleting layout elements or joining separate ones to form one, single region, you can select all relevant elements simultaneously by pressing and holding &#39;Shift&#39; key and drawing a rectangle around the entire region using your mouse. Relevant regions must be located entirely inside the rectangle. Once done, selected region will be surrounded by a blue frame.</li><li>&#39;Select contours to combine (with &#39;C&#39;) to segments (see function combine)&#39; (shortcut: 6): this tool is perfect for reaching optimal segmentation results even when working with scans featuring a densely packed and detailed print layout. The basic idea is that layout elements only be delimited by the contours of the individual letters/pictures they are composed of, thus solving the problems created by manual segmentation such as excessively broad margins, which can in turn hamper the OCR performance. To use this feature, click on the relevant button (toolbar) or use shortcut 6. All components of the scan recognized as layout elements will be coloured blue.</li></ul><p><img src="'+S+'" alt="Showing contours."> fig. 30. Showing contours.</p><p>Select individual letters or even parts of letter by clicking on them.</p><p><img src="'+L+'" alt="Selecting contours."> fig. 31. Selecting contours.</p><p>You can also apply your selection to an individual group of letters, entire words or text lines, sections of a layout element (see above: ‘Shift’ + selection with rectangle). Use shortcut C after selection in order to include all selected items – be they letters, words, lines, etc. – in one, new layout element, regardless of the layout region they had previously belonged to. This new element’s edges will be far more precise that those of an automatically generated one, enabling a particularly accurate segmentation superior to that of standardised tools.</p><p><img src="'+E+'" alt="Aggregating selected items to create new element."> fig. 32. Aggregating selected items to create new element.</p><p>Save new element by clicking on ‘Segment’. New element can be renamed as described above.</p><p><img src="'+X+'" alt="Typifying new layout element."> fig. 33. Typifying new layout element.</p><ul><li><strong>&#39;Combine selected segments or contours&#39;</strong> (shortcut: C): In order to combine several, distinct layout elements into a new element, select the entire region in question (see above) and click on corresponding button (toolbar) or use shortcut C.</li><li><strong>&#39;Fix/unfix segments, for it to persist a new auto segmentation&#39;</strong> (Shortcut: F): This function enables you to fix an element in one place beyond your next segmentation rounds. Mark element in question by clicking on it, then use shortcut F or corresponding button in toolbar. Fixed, i. e. pinned elements will appear surrounded by a dotted line. If you wish to cancel fixation, simply repeat the operation.</li><li><strong>Zoom:</strong> Use mouse wheel to zoom in and out of display. Use space key to reset display to its original size.</li><li>When working with a very complex and intricate layout, <strong>targeted interventions</strong> can help increase the precision and quality of segmentation results. The contours of all layout elements (recognized as such) consist in fact of many individual lines, separated by dots.</li></ul><p><img src="'+P+'" alt="Layout element contours."> fig. 34. Layout element contours.</p><ul><li>These tiny dots can be moved, individually or in groups, e.g. to avoid collision between different layout elements in a dense setting. Use a left click-and-hold to move a dot, click on the line to create a new dot, use &#39;delete&#39; key to delete a dot.</li><li><strong>Load results:</strong> a scan’s existing segmentation results will be sourced from OCR4all folder structure and directly loaded to LAREX.</li></ul><h2 id="final-steps-with-larex" tabindex="-1">Final steps with LAREX <a class="header-anchor" href="#final-steps-with-larex" aria-hidden="true">#</a></h2><p>Once a document’s entire segmentation has been completed with LAREX (i.e. once segmentation results have been saved for all pages), results can be found in the OCR4all folder structure. In order to make sure that results were correctly saved, simply go to menu item ‘post correction’, in the ‘segments’ bar (see below).</p><h2 id="line-segmentation" tabindex="-1">Line Segmentation <a class="header-anchor" href="#line-segmentation" aria-hidden="true">#</a></h2><p><strong>Input:</strong> pre-processed images and segmentation information (in the form of PAGE XML files)<br><strong>Output:</strong> extracted text lines saved in those PAGE XML files</p><ul><li>This step constitutes a direct preparation to the OCR process and features the dissection of all previously defined and classified layout elements into separate text lines (this a necessary step as the OCR is based on line recognition). All results are then automatically saved in the corresponding page XML files.</li></ul><p><img src="'+q+'" alt="Line segmentation settings."> fig. 35. Line segmentation settings.</p><ul><li>Generally speaking, all existing settings can be retained. <strong>There are, however, a few restrictions when it comes to page layout:</strong> if you are working with pages featuring two or more text columns (and if those have been previously defined as separate, individual main text blocks in LAREX), you will need to change the ‘maximum # of whitespace column separators’ which is pre-set at <strong>-1</strong>. -- <strong>&#39;Whitespace column separators&#39;</strong> are the white columns devoid of text found around text blocks. -- When working with a <strong>two-column layout</strong> whose text is continuous (i.e. where the first line of both columns don’t form a semantic unit), you will need to set the ‘maximum # of whitespace column separators’ at <strong>3</strong>. This number corresponds to the whitespace on both sides of the columns and to the whitespace situated between them. -- When working with a <strong>three-column layout</strong>, set the &#39;whitespace&#39; number to <strong>4</strong>, and so on.</li><li>Once all desired settings are chosen, click on ‘execute’. Afterwards, control generated results under ‘Project Overview’.</li><li>Using the ‘settings (advanced)’ option is especially useful when working with line segmentation, particularly if/when errors are reported (and shown on the interface). For instance, small letters will often fall short of the default minimal line width. You can adjust this minimal width by reducing the ‘minimum scale permitted’, which can be found under menu item ‘limits’. This will enable you to correctly re-do the line segmentation.</li><li>You can generally control the accuracy of line segmentation by clicking on the ‘lines’ button (under menu item ‘post correction’).</li></ul><h2 id="recognition" tabindex="-1">Recognition <a class="header-anchor" href="#recognition" aria-hidden="true">#</a></h2><p><strong>Input:</strong> Text lines and one or more OCR models<br><strong>Output:</strong> OCR-output in the form of text for each of the PAGE XML files at hand</p><ul><li>This step is where the actual text recognition takes place based on the individual lines and textual layout elements identified during line segmentation (see above).</li><li>Select menu item &#39;Recognition&#39;: in the right sidebar, you will only find your document&#39;s scans (or rather printed pages) for which all OCR pre-processing steps have been completed, by which we mean all previously explained steps - bar &#39;noise removal&#39;. Please select the scans for which you wish to produce an OCR text.</li><li>Go to &#39;line recognition models&#39; (under &#39;available&#39;) and select all models or model packages relevant to the typographical recognition of your text (e.g. early modern/historical Gothic type, italic/cursive type, historical Antiqua etc.). <strong>We expressly advise the use of a model package, where five models simultaneously work and interact with each other!</strong> This is much preferable to using only one model at a time. You can select all models you wish to add to your package by clicking on each of them - they will automatically be added to the &#39;selected&#39; category. When dealing with a large amount of models, you can find them by using the &#39;search&#39; function.</li></ul><p><img src="'+z+'" alt="Selection of model package for text recognition."> fig. 36. Selection of model package for text recognition.</p><ul><li>You likely won&#39;t need to adjust any of the advanced settings.</li><li>Click on &#39;execute&#39; and oversee the text recognition progress on the console.</li><li>Once recognition is finished, you will be able to view all results under menu item &#39;ground truth production&#39;.</li></ul><h2 id="ground-truth-production" tabindex="-1">Ground Truth Production <a class="header-anchor" href="#ground-truth-production" aria-hidden="true">#</a></h2><p><strong>Input:</strong> text line images and their corresponding OCR output when available<br><strong>Output:</strong> line based ground truth</p><ul><li>Under menu item &#39;ground truth production&#39; you will be able to view the texts generated during &#39;recognition&#39;, correct them and save them as a training model. This is the so called &#39;ground truth&#39;.</li><li>The correction tool used in this step is divided into two parts. On the left handside are the (selectable) scans. In the middle, you will find the segmented text line images (see above for workflow) as well as their corresponding OCR text lines, placed directly underneath. We call this standard display &#39;text view&#39;.</li></ul><p><img src="'+j+'" alt="Ground truth production with &#39;text view&#39;."> fig. 37. Ground truth production with &#39;text view&#39;.</p><p>Clicking on the &#39;Switch to page view&#39; button will bring you to the so called &#39;page view&#39; display, in which you can work on all text lines while they are displayed in relation to the entire page layout. By clicking &#39;switch to text view&#39;, you will return to the initial &#39;text view&#39; display.</p><p><img src="'+G+'" alt="Ground truth production with &#39;page view&#39;."> fig. 38. Ground truth production with &#39;page view&#39;.</p><ul><li>On the right hand side of the display, you will find the virtual keyboard, with which you can set special characters such as ligatures, abbreviation, diacritical signs etc. Simply place your cursor where you with to insert a special character and then click on said character in the virtual keyboard. In order to add new characters to the virtual keyboard, simply click on the plus icon, add character through copy and paste in the blank and click on &#39;save&#39;. if you wish to delete characters from the virtual keyboard, drag and drop said character on the recycle bin icon. Once all necessary/desired changes have been made, click on &#39;save&#39; and &#39;lock&#39;. Using buttons &#39;lad&#39; and &#39;save&#39; will ultimately enable you to save different virtual keyboards specific to any particular document. Once a virtual keyboard has been saved as such, it can be re-loaded at any time, which is particularly useful when you need to interrupt correction - or if you want to use this keyboard for another document for which it is suited.</li><li>In order to correct individual lines in &#39;text view&#39; mode, click on the line in question: you can now correct and edit it. (When working with &#39;page view&#39;, you will need to click on the line you wish to edit first, after which a text field will appear in which you will be able to proceed to corrections/edits as well. Use &#39;tabulator&#39; key to go to the next line, and so on. All following steps are identical in both viewers. Once a text line has been completely and satisfactorily corrected, press &#39;enter key&#39;. The line will be coloured green, meaning it will be automatically saved as &#39;ground truth&#39; in OCR4all once the entire page has been completed and saved (by clicking on &#39;save result&#39; or using shortcut crtl + S). Once a line has been identified as ground truth, it can be used as a basis for OCR training as well as a tool to evaluate the OCR model you used.</li><li>If there are erroneously recognised text line images among your pairs of text lines images and corresponding OCR text lines, please let your OCR text lines unfilled to not cause problems during the OCR model training.</li><li>Were you to conclude, while working on ground truth production, that the quality of the text recognition achieved with mixed models wasn&#39;t satisfactory, you can always perform a final, manual text correction by employing a training model targeted towards the specific kind of document you are working on. Proceeding to this step will generally increase the recognition quality and percentage.</li></ul><h2 id="evaluation" tabindex="-1">Evaluation <a class="header-anchor" href="#evaluation" aria-hidden="true">#</a></h2><p><strong>Input:</strong> line based OCR texts and corresponding ground truth<br><strong>Output:</strong> error statistics</p><ul><li><p>Under menu item &#39;evaluation&#39;, users can check on the recognition rate of the model(s) currently under use.</p></li><li><p>In order to generate an evaluation, go to right sidebar and select all the scans recognized with the help of said model and subsequently corrected during &#39;ground truth production&#39;.</p></li><li><p>Click on &#39;execute&#39;: a chart will appear in the console. At the top, you will see the percentage of errors as well as the full count of errors (&#39;errs&#39;). All identified errors are listed underneath, displayed as a chart featuring the comparison between the initially recognized text (&#39;PRED&#39;, righthand column) and the results of ground truth production (&#39;GT&#39;, lefthand column). Behind each error item, you will see the frequency of that particular type of error as well as its percentage compared to the entire error count.</p></li></ul><p><img src="'+D+`" alt="Evaluation results with general error rate, ten most frequent errors as well as their percentage
compared to entire error count."> fig. 39. Evaluation results with general error rate, ten most frequent errors as well as their percentage compared to entire error count.</p><ul><li>Thanks to the spreadsheet and its display (100% - error rate), users can evaluate whether a new training using individual, targeted models is necessary.</li></ul><h2 id="training" tabindex="-1">Training <a class="header-anchor" href="#training" aria-hidden="true">#</a></h2><p><strong>Input:</strong> text line images with corresponding ground truth (as an option, existing OCR models can be included as well, which are used as so called &#39;pre-training&#39; and as basis for model training<br><strong>Output:</strong> one or more OCR model(s)</p><p>The aim of our software is to produce a text containing as few errors as possible. In that case, why is even necessary to use the training module and produce models targeted to your document, instead of simply correcting it manually? In fact, the better a recognition model the shorter the correction time. The idea of a continuous model training is to train increasingly better models through continuous corrections, which in turn will reduce the amount of corrections needed for the next pages, and so on.</p><ul><li>With this training tool, users will be able to train models tailored to their document, based on the lines of ground truth available for this document. In order to begin training, please proceed to the following adjustments in general settings: -- Set the &#39;Number of folds to train&#39; (i.e. the number of models to train) to 5. → Training will occur with a model package containing five individual models. -- <strong>&#39;Only train a single fold box&#39;:</strong> please don&#39;t fill out this box! -- Set the <strong>&#39;Number of models to train in parallel&#39;</strong> at -1. → All training models will be trained simultaneously. -- If all characters contained in the pretraining model need to be kept in the model you wish to train (i.e. added to its so called whitelist), please check the <strong>&#39;Keep all characters loaded from the last model&#39;</strong> box. -- In effect, the <strong>&#39;Whitelist characters to keep in the model&#39;</strong> is the exhaustive list of characters used during training and in the subsequently generated model. Any character not contained in the whitelist won&#39;t be included in the process. -- <strong>&#39;Pretraining&#39;</strong>: Either <strong>&#39;Train each model based on different existing models&#39;</strong> (a menu will appear containing five dropdown lists. Inside each of them, enter one of the five models belonging to the model package used as advised earlier. Regardless of the training step (be it the first round or the third), always enter the five models used since the beginning) or <strong>&#39;Train all models based on one existing model&#39;</strong> (click on this setting if you started training using only one model. Simply select that exact training model for each repetition of the training process). -- <strong>&#39;Data augmentation&#39;:</strong> Please don&#39;t fill out this box! This function describes the data augmentation per line. Users can enter a number, e.g. 5, in order to increase the amount of training material. This can lead to the generation of better performing models. However, this process is more time-costly than the standard route. -- <strong>&#39;Skip retraining on real data only&#39;</strong>: Please don&#39;t fill out this box!</li><li>The advanced settings remain unchanged.</li></ul><p><img src="`+W+'" alt="Settings for the training of document-specific models."> fig. 40. Settings for the training of document-specific models.</p><ul><li>Click on &#39;execute&#39; to start training. You will be able to view the training progress at any time in the console. Training time will vary depending on the total amount of ground truth lines.</li><li>In accordance with the aforementioned settings, a model package (containing five individual models and tailored to your document&#39;s exact needs) will be generated through training and automatically saved in folder ocr4all/models/document title/0. Going forward, this model package will be labelled &#39;0&#39;. From this point on, while working on this document and striving towards improving recognition, you will be able to select said package under menu item &#39;recognition&#39; among other models, when working with new pages from the same document. If you wish to generate a second document-specific model package (e.g. to improve the first one&#39;s weaknesses), simply repeat the process as described above. This new model will be labelled &#39;1&#39;, and so on.</li></ul><h2 id="post-correction" tabindex="-1">Post Correction <a class="header-anchor" href="#post-correction" aria-hidden="true">#</a></h2><p><strong>Input:</strong> segmentation information and metadata on pre-processed scans, as well as the corresponding text<br><strong>Output:</strong> corrected/improved segmentation info and text Under menu item &#39;post correction&#39;, users will be able to manually adjust and correct all segmentation info and text generated through the course of the previous sub-modules. This sub-module is itself divided into three levels:</p><ul><li>The item &#39;segment&#39; (i.e. level 1) will enable you to adjust all regions determined during segmentation and their reading order, page after page. You will recognize a few of the tools from working with LAREX (see above). Please note that all changes undertaken at this level will have consequences for the following levels. For example, if you decide to delete a certain region during level 1, you will loose all text lines belonging to this region going forward.</li><li>The &#39;lines&#39; item (i.e. level 2) enables you to manually adjust automatic line recognition. You will be able to add lines where there were none, to change their shape or position, or to delete them. The reading order can be adjusted as well, on a line basis.</li></ul><p><img src="'+U+'" alt="Adjusting line-based reading order during post correction."> fig. 41. Adjusting line-based reading order during post correction.</p><ul><li>Under item &#39;text&#39; (i.e. level 3), you will find the afore-described ground truth submodule, in which the text content of your lines can be corrected once more.</li></ul><h2 id="result-generation" tabindex="-1">Result Generation <a class="header-anchor" href="#result-generation" aria-hidden="true">#</a></h2><p><strong>Input:</strong> line-based OCR results, ground truth (optional - only if at hand) and the LAREX-segmentation and line-segmentation data<br><strong>Output:</strong> final text output (lines will be re-grouped into pages and full-text) as well as page based PAGE XML</p><p><img src="'+M+'" alt="Result Generation."> fig. 42: Result Generation.</p><ul><li>Once the user considers all recognition and correction steps to be finalized, results can be generated as TXT or XML files, saved under ocr4all/data/results.</li><li>You can choose whether you need a text or PAGE XML file under &#39;settings&#39;. If you opt for a text file, individual TXT files will be generated for each scan as well as an additional one containing your document&#39;s entire text.</li><li>PAGE XML files are also generated on a page-base and additionally contain data about creation date, last changes in the file, metadata about each page&#39;s corresponding scan, about the page&#39;s size, its layout regions and their exact coordinates, its reading order, its text lines and their text content.</li></ul>',128);function H(i,V,$,Z,J,K){return l(),o("div",null,[t("h1",F,[a(s(i.$frontmatter.title)+" ",1),Y]),B])}const te=n(N,[["render",H]]);export{ee as __pageData,te as default};
